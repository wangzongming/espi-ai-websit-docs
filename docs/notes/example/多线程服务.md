---
title: 速度优化、线上部署建议
createTime: 2024/11/07 15:17:17
permalink: /example/3u5noitb/
---

## 速度优化

当你发现回答响应变慢的时候，你需要重点判断 `LLM`、`IAT`、`TTS` 这三个服务的响应速度，根据控制台输出信息的时间即可计算出来。

其次是你设置的 `auth` 配置函数是否使用 `await` 来等待授权查询，非常不建议在 `auth` 中等待查询结果，在 `auth` 应该使用缓存信息，而不应该向接口发出请求。更不应该每次去查询 `mysql`。

## 线上部署建议
建议将 ESP-AI 独立部署为一个服务，并且使用 `PM2` 等工具来运行项目，以实现多线程服务。

并且建议使用 `Nginx` 服务来实现负载均衡。

但是需要注意，这样会将各个设备分散到不同的服务中，在服务端进行设备控制时，比如向设备发送重启命令时，需要给每一个 ESP-AI 服务节点都发送一个信息，除非在设备接入服务时，你做了记录。



