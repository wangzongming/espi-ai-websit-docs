<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="/images/logo-tm.png"><title>Client | ESP-AI</title><meta name="description" content="The simplest and most cost-effective AI integration solution, enabling any object to have intelligent conversation capabilities. Let everyone have an AI assistant">
    <link rel="preload" href="/assets/style-D2Ih_zR0.css" as="style"><link rel="stylesheet" href="/assets/style-D2Ih_zR0.css">
    <link rel="modulepreload" href="/assets/app-C4W-fgaO.js"><link rel="modulepreload" href="/assets/client.html-C0mUGw4Z.js">
    <link rel="prefetch" href="/assets/client.html-CP5r3P3o.js" as="script"><link rel="prefetch" href="/assets/index.html-BjETPXPc.js" as="script"><link rel="prefetch" href="/assets/server.html-BEU1Ns_D.js" as="script"><link rel="prefetch" href="/assets/start.html-sXrTJEd-.js" as="script"><link rel="prefetch" href="/assets/change-logs.html-gLvM-KYI.js" as="script"><link rel="prefetch" href="/assets/plugs.html-ySaGgOVQ.js" as="script"><link rel="prefetch" href="/assets/ing.html-ZLy9evDf.js" as="script"><link rel="prefetch" href="/assets/plugs-develop.html-CIOiAS1G.js" as="script"><link rel="prefetch" href="/assets/technical-support.html-BMuktSPA.js" as="script"><link rel="prefetch" href="/assets/cooperation.html-CwxR7mMm.js" as="script"><link rel="prefetch" href="/assets/COMMERCIAL_LICENSE.html-0c48z-Hy.js" as="script"><link rel="prefetch" href="/assets/QA.html-Bp9298Ee.js" as="script"><link rel="prefetch" href="/assets/COMMERCIAL_QUERY.html-CHFNBsUf.js" as="script"><link rel="prefetch" href="/assets/index.html-DvkwlrnS.js" as="script"><link rel="prefetch" href="/assets/server.html-lGbRFx1l.js" as="script"><link rel="prefetch" href="/assets/start.html-D_A-cN7l.js" as="script"><link rel="prefetch" href="/assets/change-logs.html-B6I9C8D6.js" as="script"><link rel="prefetch" href="/assets/plugs.html-BEXTNCyv.js" as="script"><link rel="prefetch" href="/assets/ing.html-CTOaMO0b.js" as="script"><link rel="prefetch" href="/assets/plugs-develop.html-DXqPP3GO.js" as="script"><link rel="prefetch" href="/assets/technical-support.html-C4dfepXr.js" as="script"><link rel="prefetch" href="/assets/cooperation.html-DnEldB-f.js" as="script"><link rel="prefetch" href="/assets/QA.html-CG6CQdur.js" as="script"><link rel="prefetch" href="/assets/COMMERCIAL_QUERY.html-Ba5eanBh.js" as="script"><link rel="prefetch" href="/assets/404.html-CzMI0Kgz.js" as="script"><link rel="prefetch" href="/assets/style-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/docsearch-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/index-DWGeGWcS.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/en/"><img class="vp-site-logo" src="/images/logo-tm.png" alt="ESP-AI"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">ESP-AI</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Develop"><span class="title">Develop</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Develop"><span class="title">Develop</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/start.html" aria-label="Quick Start"><!---->Quick Start<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/en/client.html" aria-label="Client"><!---->Client<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/server.html" aria-label="Server Side"><!---->Server Side<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/plugs-develop.html" aria-label="Plugin Development"><!---->Plugin Development<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/QA.html" aria-label="常见问题"><!---->常见问题<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/en/plugs.html" aria-label="Plug-in market"><!---->Plug-in market<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/en/change-logs.html" aria-label="Change Logs"><!---->Change Logs<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Contact us"><span class="title">Contact us</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Contact us"><span class="title">Contact us</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/technical-support.html" aria-label="Technical Support"><!---->Technical Support<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/cooperation.html" aria-label="Commercial Cooperation/Sponsorship"><!---->Commercial Cooperation/Sponsorship<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/COMMERCIAL_LICENSE.html" aria-label="/en/COMMERCIAL_LICENSE.html"><!---->/en/COMMERCIAL_LICENSE.html<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/COMMERCIAL_QUERY.html" aria-label="Commercial Authorization Query"><!---->Commercial Authorization Query<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://dev.espai.fun" aria-label="Developer platform" rel="noopener noreferrer" target="_blank"><!---->Developer platform<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Blogroll"><span class="title">Blogroll</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Blogroll"><span class="title">Blogroll</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://xiaomingio.top" aria-label="小明IO" rel="noopener noreferrer" target="_blank"><!---->小明IO<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://www.ttson.cn/" aria-label="海豚配音" rel="noopener noreferrer" target="_blank"><!---->海豚配音<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://acgn.ttson.cn/" aria-label="Free second tone" rel="noopener noreferrer" target="_blank"><!---->Free second tone<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="http://hexp.top/" aria-label="Qsy&#39;s Blog" rel="noopener noreferrer" target="_blank"><!---->Qsy&#39;s Blog<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://mybatis-mp.cn/" aria-label="mybatis-mp" rel="noopener noreferrer" target="_blank"><!---->mybatis-mp<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://authapi.applekuid.com/index.html" aria-label="安全获取苹果UDID" rel="noopener noreferrer" target="_blank"><!---->安全获取苹果UDID<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://www.kazuhalu.com" aria-label="KaedeharaLu&#39;s Blog" rel="noopener noreferrer" target="_blank"><!---->KaedeharaLu&#39;s Blog<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="http://www.dhhyxr.top" aria-label="千年小妖仔的博客" rel="noopener noreferrer" target="_blank"><!---->千年小妖仔的博客<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/client.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/en/client.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/wangzongming/esp-ai" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Develop"><span class="title">Develop</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Develop"><span class="title">Develop</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/start.html" aria-label="Quick Start"><!---->Quick Start<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/en/client.html" aria-label="Client"><!---->Client<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/server.html" aria-label="Server Side"><!---->Server Side<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/plugs-develop.html" aria-label="Plugin Development"><!---->Plugin Development<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/QA.html" aria-label="常见问题"><!---->常见问题<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/en/plugs.html" aria-label="Plug-in market"><!---->Plug-in market<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/en/change-logs.html" aria-label="Change Logs"><!---->Change Logs<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Contact us"><span class="title">Contact us</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Contact us"><span class="title">Contact us</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/technical-support.html" aria-label="Technical Support"><!---->Technical Support<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/cooperation.html" aria-label="Commercial Cooperation/Sponsorship"><!---->Commercial Cooperation/Sponsorship<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/COMMERCIAL_LICENSE.html" aria-label="/en/COMMERCIAL_LICENSE.html"><!---->/en/COMMERCIAL_LICENSE.html<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/en/COMMERCIAL_QUERY.html" aria-label="Commercial Authorization Query"><!---->Commercial Authorization Query<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://dev.espai.fun" aria-label="Developer platform" rel="noopener noreferrer" target="_blank"><!---->Developer platform<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Blogroll"><span class="title">Blogroll</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Blogroll"><span class="title">Blogroll</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://xiaomingio.top" aria-label="小明IO" rel="noopener noreferrer" target="_blank"><!---->小明IO<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://www.ttson.cn/" aria-label="海豚配音" rel="noopener noreferrer" target="_blank"><!---->海豚配音<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://acgn.ttson.cn/" aria-label="Free second tone" rel="noopener noreferrer" target="_blank"><!---->Free second tone<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="http://hexp.top/" aria-label="Qsy&#39;s Blog" rel="noopener noreferrer" target="_blank"><!---->Qsy&#39;s Blog<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://mybatis-mp.cn/" aria-label="mybatis-mp" rel="noopener noreferrer" target="_blank"><!---->mybatis-mp<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://authapi.applekuid.com/index.html" aria-label="安全获取苹果UDID" rel="noopener noreferrer" target="_blank"><!---->安全获取苹果UDID<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://www.kazuhalu.com" aria-label="KaedeharaLu&#39;s Blog" rel="noopener noreferrer" target="_blank"><!---->KaedeharaLu&#39;s Blog<!----></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="http://www.dhhyxr.top" aria-label="千年小妖仔的博客" rel="noopener noreferrer" target="_blank"><!---->千年小妖仔的博客<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/client.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/en/client.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/wangzongming/esp-ai" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Client <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="client" tabindex="-1"><a class="header-anchor" href="#client"><span>Client</span></a></h1><p>This document will help you delve into the hardware development aspects, including explanations of various APIs provided by the <code>ESP-AI</code> hardware library.</p><h2 id="basic-code" tabindex="-1"><a class="header-anchor" href="#basic-code"><span>Basic Code</span></a></h2><p>We won&#39;t go into detail here; refer directly to the Quick Start section for the <a href="start.html#client">client code</a>.</p><h2 id="pin-wiring" tabindex="-1"><a class="header-anchor" href="#pin-wiring"><span>Pin Wiring</span></a></h2><p>We won&#39;t go into detail here; refer directly to the Quick Start section for the <a href="start.html#hardware-wiring-esp32-s3">pin wiring</a>.</p><h2 id="apis" tabindex="-1"><a class="header-anchor" href="#apis"><span>APIs</span></a></h2><p>In the basic code, we used the two most fundamental APIs: <code>esp_ai.begin</code> and <code>esp_ai.loop</code>, which must be called. Below is a list of all the available APIs, which can be selected based on your needs.</p><h3 id="begin" tabindex="-1"><a class="header-anchor" href="#begin"><span>.begin</span></a></h3><p>Before using any methods, this method should be called in the <code>setup()</code> function to initialize the hardware pins.</p><h4 id="example-code" tabindex="-1"><a class="header-anchor" href="#example-code"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line">ESP_AI esp_ai<span class="token punctuation">;</span>  </span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// [REQUIRED] Debug mode, outputs more information</span></span>
<span class="line">  <span class="token keyword">bool</span> debug <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [OPTIONAL] WiFi configuration: { WiFi SSID, WiFi password, hotspot name } Note: use double quotes! If it fails to connect to WiFi, it automatically opens a hotspot, and users can connect to the hotspot and open the configuration URL.</span></span>
<span class="line">  ESP_AI_wifi_config wifi_config <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ESP-AI&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 自定义配网页面</span></span>
<span class="line">  <span class="token comment">// char html_str[] = &quot;html 按照 client\esp-ai\src\webServer\index.html目录中的文件来写即可。&quot;;</span></span>
<span class="line">  <span class="token comment">// wifi_config.html_str = (char *)malloc(strlen(html_str) + 1);</span></span>
<span class="line">  <span class="token comment">// strcpy(wifi_config.html_str, html_str);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [REQUIRED] Server configuration: { IP address, port, &quot;query parameters, separated by ampersand (&amp;), max 256 bytes&quot; }</span></span>
<span class="line">  ESP_AI_server_config server_config <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;192.168.1.5&quot;</span><span class="token punctuation">,</span> <span class="token number">8088</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">/**</span>
<span class="line">  * [REQUIRED] Offline wake-up scheme: { Scheme, Recognition threshold, Pin number, Serial string }, &quot;edge_impulse&quot; | &quot;asrpro&quot; | &quot;pin_high&quot; | &quot;pin_low&quot; | &quot;serial&quot; | &quot;custom&quot;. For &quot;custom&quot;, call `esp_ai.wakeUp()` to wake up.</span>
<span class="line">  * In the given parameters, the pin number is only useful when using button wake-up; for other methods, you can set any value or leave it empty. Other methods are similar.</span>
<span class="line">  * Voice Wake-Up Schemes:</span>
<span class="line">  * edge_impulse: Built-in voice wake-up scheme (supported by ESP32S3 boards)</span>
<span class="line">  * asrpro: Tianwen voice module wake-up</span>
<span class="line">  * pin_high: High-level pin wake-up</span>
<span class="line">  * pin_low: Low-level pin wake-up</span>
<span class="line">  * serial: Serial string wake-up</span>
<span class="line">  * custom: Custom, manually call `esp_ai.wakeUp()` to wake up</span>
<span class="line">  */</span>  </span>
<span class="line">  ESP_AI_wake_up_config wake_up_config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">strcpy</span><span class="token punctuation">(</span>wake_up_config<span class="token punctuation">.</span>wake_up_scheme<span class="token punctuation">,</span> <span class="token string">&quot;asrpro&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 唤醒方案</span></span>
<span class="line">  <span class="token function">strcpy</span><span class="token punctuation">(</span>wake_up_config<span class="token punctuation">.</span>str<span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 串口和天问asrpro 唤醒时需要配置的字符串，也就是从另一个开发版发送来的字符串</span></span>
<span class="line">  <span class="token comment">// strcpy(wake_up_config.threshold,  0.95);  //  内置语音唤醒时需要配置 唤醒阈值 0-1</span></span>
<span class="line">  <span class="token comment">// strcpy(wake_up_config.str, 10);  // 引脚高低电平唤醒时需要的引脚IO</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [OPTIONAL] Microphone pin configuration: { BCK IO number, WS IO number, DATA_IN IO number }</span></span>
<span class="line">  ESP_AI_i2s_config_mic i2s_config_mic <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [OPTIONAL] Speaker pin configuration: { BCK IO number, WS IO number, DATA_IN IO number, sampling rate }</span></span>
<span class="line">  ESP_AI_i2s_config_speaker i2s_config_speaker <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">16000</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [OPTIONAL] Volume control configuration: { Input pin, Max input value (1024|4096), default volume (0-1) }</span></span>
<span class="line">  ESP_AI_volume_config volume_config <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">,</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// Start ESP-AI</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> i2s_config_mic<span class="token punctuation">,</span> i2s_config_speaker<span class="token punctuation">,</span> wifi_config<span class="token punctuation">,</span> server_config<span class="token punctuation">,</span> wake_up_config<span class="token punctuation">,</span> volume_config<span class="token punctuation">,</span> debug <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description" tabindex="-1"><a class="header-anchor" href="#parameter-description"><span>Parameter Description</span></a></h4><table><thead><tr><th>Parameter Name</th><th>Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>debug</td><td>✔️</td><td>bool</td><td>See example comment</td></tr><tr><td>wifi_config</td><td>✔️</td><td>ESP_AI_wifi_config</td><td>See example comment</td></tr><tr><td>server_config</td><td>✔️</td><td>ESP_AI_server_config</td><td>See example comment</td></tr><tr><td>wake_up_config</td><td>✔️</td><td>ESP_AI_wake_up_config</td><td>See example comment</td></tr><tr><td>i2s_config_mic</td><td></td><td>ESP_AI_i2s_config_mic</td><td>See example comment</td></tr><tr><td>i2s_config_speaker</td><td></td><td>ESP_AI_i2s_config_speaker</td><td>See example comment</td></tr><tr><td>volume_config</td><td></td><td>ESP_AI_volume_config</td><td>See example comment</td></tr></tbody></table><hr><h3 id="loop" tabindex="-1"><a class="header-anchor" href="#loop"><span>.loop</span></a></h3><p>Call this in the <code>loop()</code> function to handle internal hardware logic. It must be placed at the top of the <code>loop()</code> function.</p><h4 id="example-code-1" tabindex="-1"><a class="header-anchor" href="#example-code-1"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line">ESP_AI esp_ai<span class="token punctuation">;</span>  </span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description-1" tabindex="-1"><a class="header-anchor" href="#parameter-description-1"><span>Parameter Description</span></a></h4><p>None</p><hr><h3 id="setwificonfig" tabindex="-1"><a class="header-anchor" href="#setwificonfig"><span>.setWifiConfig</span></a></h3><p>Manually set the WiFi SSID, WiFi password, and API key. After setting, it will reconnect to WiFi. Apart from the SSID and password, other parameters are optional, and you can pass an empty string if you don’t want to change them. Returns <code>true</code> on success, <code>false</code> on failure.</p><h4 id="example-code-2" tabindex="-1"><a class="header-anchor" href="#example-code-2"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line">esp_ai<span class="token punctuation">.</span><span class="token function">setWifiConfig</span><span class="token punctuation">(</span><span class="token string">&quot;oldwang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;oldwang520&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will reconnect to WiFi</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="parameter-description-2" tabindex="-1"><a class="header-anchor" href="#parameter-description-2"><span>Parameter Description</span></a></h4><p>None</p><hr><h3 id="wifiisconnected" tabindex="-1"><a class="header-anchor" href="#wifiisconnected"><span>.wifiIsConnected</span></a></h3><p>Returns whether connected to WiFi.</p><h4 id="example-code-3" tabindex="-1"><a class="header-anchor" href="#example-code-3"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line">ESP_AI esp_ai<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// Returns `true` after connecting to WiFi, must be placed after `esp_ai.loop();`</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>esp_ai<span class="token punctuation">.</span><span class="token function">wifiIsConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description-3" tabindex="-1"><a class="header-anchor" href="#parameter-description-3"><span>Parameter Description</span></a></h4><p>None</p><hr><h3 id="localip" tabindex="-1"><a class="header-anchor" href="#localip"><span>.localIP</span></a></h3><p>Returns the local IP address of the development board, available after connecting to WiFi.</p><h4 id="example-code-4" tabindex="-1"><a class="header-anchor" href="#example-code-4"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line">Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>esp_ai<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="parameter-description-4" tabindex="-1"><a class="header-anchor" href="#parameter-description-4"><span>Parameter Description</span></a></h4><p>None</p><hr><h3 id="wakeup" tabindex="-1"><a class="header-anchor" href="#wakeup"><span>.wakeUp</span></a></h3><h4 id="example-code-5" tabindex="-1"><a class="header-anchor" href="#example-code-5"><span>Example Code</span></a></h4><p>Calling this method will directly wake up &quot;Xiaoming&quot; and enter the conversation flow. This should be used in conjunction with physical buttons or third-party voice wake-up boards (such as Tianwen).</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line">esp_ai<span class="token punctuation">.</span><span class="token function">wakeUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="parameter-description-5" tabindex="-1"><a class="header-anchor" href="#parameter-description-5"><span>Parameter Description</span></a></h4><p>Sets the speaker volume.</p><hr><h3 id="setvolume" tabindex="-1"><a class="header-anchor" href="#setvolume"><span>.setVolume</span></a></h3><h4 id="example-code-6" tabindex="-1"><a class="header-anchor" href="#example-code-6"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line"><span class="token comment">// Set volume level 0-100</span></span>
<span class="line">esp_ai<span class="token punctuation">.</span><span class="token function">setVolume</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description-6" tabindex="-1"><a class="header-anchor" href="#parameter-description-6"><span>Parameter Description</span></a></h4><ul><li>Type: <code>int</code></li><li>Range: <code>0-100</code></li></ul><hr><h3 id="onevent" tabindex="-1"><a class="header-anchor" href="#onevent"><span>.onEvent</span></a></h3><p>Callback for receiving user control commands, such as turning lights on or off. You need to perform the corresponding operations within this callback.</p><h4 id="example-code-7" tabindex="-1"><a class="header-anchor" href="#example-code-7"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line"><span class="token keyword">void</span> <span class="token function">on_command</span><span class="token punctuation">(</span>String command_id<span class="token punctuation">,</span> String data<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Serial<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nReceived command: %s -- %s\n&quot;</span><span class="token punctuation">,</span> command_id<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// Control light demonstration</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>command_id <span class="token operator">==</span> <span class="token string">&quot;device_open_001&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Turn on the light&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">digitalWrite</span><span class="token punctuation">(</span>led_pin<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>command_id <span class="token operator">==</span> <span class="token string">&quot;device_close_001&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Turn off the light&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">digitalWrite</span><span class="token punctuation">(</span>led_pin<span class="token punctuation">,</span> LOW<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// User command listener</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">onEvent</span><span class="token punctuation">(</span>on_command<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description-7" tabindex="-1"><a class="header-anchor" href="#parameter-description-7"><span>Parameter Description</span></a></h4><p>None</p><hr><h3 id="onerror" tabindex="-1"><a class="header-anchor" href="#onerror"><span>.onError</span></a></h3><p>Unified error callback</p><table><thead><tr><th>Error Code</th><th>Error Message</th></tr></thead><tbody><tr><td>000</td><td>Unknown service error</td></tr><tr><td>001</td><td>Internal service error</td></tr><tr><td>002</td><td>Server authentication error</td></tr><tr><td>100</td><td>Unknown IAT service error</td></tr><tr><td>101</td><td>Failed to connect to IAT service</td></tr><tr><td>102</td><td>Unknown IAT service invocation error</td></tr><tr><td>200</td><td>Unknown LLM service error</td></tr><tr><td>201</td><td>Failed to connect to LLM service</td></tr><tr><td>202</td><td>Unknown LLM service invocation error</td></tr><tr><td>300</td><td>Unknown TTS service error</td></tr><tr><td>301</td><td>Failed to connect to TTS service</td></tr><tr><td>302</td><td>Unknown TTS service invocation error</td></tr></tbody></table><h4 id="example-code-8" tabindex="-1"><a class="header-anchor" href="#example-code-8"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line"><span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String code<span class="token punctuation">,</span> String at_pos<span class="token punctuation">,</span> String message<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// some code...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 错误监听, 需要放到 begin 前面，否则可能监听不到一些数据</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description-8" tabindex="-1"><a class="header-anchor" href="#parameter-description-8"><span>Parameter Description</span></a></h4><p>None</p><hr><h3 id="onapinfo" tabindex="-1"><a class="header-anchor" href="#onapinfo"><span>.onAPInfo</span></a></h3><p>Called when the board cannot connect and starts a hotspot. Receiving this callback indicates that the user should be prompted to open the configuration page.</p><h4 id="example-code-9" tabindex="-1"><a class="header-anchor" href="#example-code-9"><span>Example Code</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="line"><span class="token comment">// @url Configuration URL, in case of a display, it is recommended to generate a QR code and display it.</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">onAPInfo</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String ip<span class="token punctuation">,</span> String ap_name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// some code...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// User command listener</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">onAPInfo</span><span class="token punctuation">(</span>onAPInfo<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-description-9" tabindex="-1"><a class="header-anchor" href="#parameter-description-9"><span>Parameter Description</span></a></h4><p>None</p><h3 id="onnetstatus" tabindex="-1"><a class="header-anchor" href="#onnetstatus"><span>.onNetStatus</span></a></h3><p>Callbacks for changes in device network status and service connection status</p><table><thead><tr><th>标志符</th><th>说明</th></tr></thead><tbody><tr><td>&quot;0&quot;</td><td>未连接wifi</td></tr><tr><td>&quot;0_ing&quot;</td><td>正在连接wifi</td></tr><tr><td>&quot;0_ap&quot;</td><td>已经打开了配网热点，需要用户配网</td></tr><tr><td>&quot;2&quot;</td><td>未连接服务</td></tr><tr><td>&quot;3&quot;</td><td>已连接服务器</td></tr></tbody></table><h4 id="案例代码" tabindex="-1"><a class="header-anchor" href="#案例代码"><span>案例代码</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre class="language-c"><code><span class="line"><span class="token keyword">void</span> <span class="token function">onNetStatus</span><span class="token punctuation">(</span>String status<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// some code...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">  <span class="token comment">// 设备网络状态监听, 需要放到 begin 前面，否则可能监听不到一些数据</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">onNetStatus</span><span class="token punctuation">(</span>onNetStatus<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  esp_ai<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="参数说明" tabindex="-1"><a class="header-anchor" href="#参数说明"><span>参数说明</span></a></h4><p>无</p><h2 id="customize-the-web-page" tabindex="-1"><a class="header-anchor" href="#customize-the-web-page"><span>Customize the web page</span></a></h2><div class="language-c++ line-numbers-mode" data-highlighter="prismjs" data-ext="c++" data-title="c++"><pre class="language-c++"><code><span class="line">ESP_AI_wifi_config wifi_config = { &quot;&quot;, &quot;&quot;, &quot;ESP-AI&quot; };</span>
<span class="line">// 自定义配网页面</span>
<span class="line">// 详细内容暂无，可自行参照： client\esp-ai\src\webServer\index.html 写即可</span>
<span class="line">char html_str[] = &quot;HTML content&quot;;</span>
<span class="line">wifi_config.html_str = (char *)malloc(strlen(html_str) + 1);</span>
<span class="line">strcpy(wifi_config.html_str, html_str);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/wangzongming/espi-ai-websit-docs/edit/main/docs/en/client.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: wangzm@bjzxkj.com">wangzongming</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-C4W-fgaO.js" defer></script>
  </body>
</html>
